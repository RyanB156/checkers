

<p id="gameCode"></p>
<button id="getGameCodeButton" onclick="getGameCode()">Host Game</button>
<button id="startButton" onclick="start()">Start</button>

<script>

  let board;

  // Create a game code for the new game.
  async function getGameCode() {
    
    fetch('/action/getGameCode', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        cache: 'no-cache'
      })
    .then(response => response.text())
    .then(data => {
      console.log(data);
      let gameCodeMessage = `You are hosting game <b>${data}</b><br> Share this with your friend so they can join!`
      document.getElementById('gameCode').innerHTML = gameCodeMessage;
      Cookies.set('gameCode', data);
      document.getElementById('getGameCodeButton').style = "display:none;";
      hostGame();
    });
  }

  // Send game code to the server and initialize a new game.
  async function hostGame() {
    fetch('/action/hostGame', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
    })
    .then(response => {
      document.getElementById('startButton').style="display:block";
    })
  }

  // Tell server to activate the new game and start playing.
  // TODO: Make sure that there are two players active. (timeouts maybe?).
  async function start() {
    fetch('/action/startGame', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
    })
    .then(response => {
      location.href = '/playGame';
    })
  }

</script>